"use strict";
/* Heartslider â€“ v3.3.1 */
function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=!0,didErr=!1,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var HeartSlider=function(){function HeartSlider(userSettings){_classCallCheck(this,HeartSlider),_defineProperty(this,"next",(function(){var _this=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],nextIndex=(_this.index+1+_this.total)%_this.total,indexToProgressiveLoad=(nextIndex+1+_this.total)%_this.total;_this.prevNextHandler(nextIndex,indexToProgressiveLoad,isManuallyCalled)})),_defineProperty(this,"previous",(function(){var _this=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],previousIndex=(_this.index-1+_this.total)%_this.total,indexToProgressiveLoad=previousIndex;_this.prevNextHandler(previousIndex,indexToProgressiveLoad,isManuallyCalled)})),_defineProperty(this,"resume",(function(){var _this=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;_this.settings.paused&&(_this.settings.paused=!1);var nextSlideIndex=(_this.index+1+_this.total)%_this.total;_this.settings.progressive&&setTimeout((function(){_this.progressiveLoad((nextSlideIndex+1+_this.total)%_this.total)}),_this.settings.delay),_this.goToSlide(nextSlideIndex),this.slideInterval=setInterval((function(){_this.next(_this,!1)}),_this.settings.delay+_this.settings.transition)})),_defineProperty(this,"pause",(function(){var _this=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;_this.settings.paused||(_this.settings.paused=!0,clearTimeout(this.manualTimeout),clearTimeout(this.kickoffTimer),clearInterval(this.slideInterval))}));var _this2=this;for(var prop in _this2.settings={buttons:!1,clickToAdvance:!1,delay:1e3,effect:"fadeOut",loop:!0,manualTransition:400,paused:!1,pauseOnInactiveWindow:!1,progressive:!0,randomize:!1,slideshow:".heart-slideshow",slides:".heart-slide",swipe:!0,transition:3e3},userSettings)this.settings.hasOwnProperty(prop)&&(this.settings[prop]=userSettings[prop]);if(this.slideshowSelector="object"===_typeof(_this2.settings.slideshow)?_this2.settings.slideshow:document.querySelector(_this2.settings.slideshow),!this.slideshowSelector)return!1;if(this.slideshowSelector.classList.contains("heart-slideshow")||this.slideshowSelector.classList.add("heart-slideshow"),this.slides=Array.prototype.slice.apply(this.slideshowSelector.querySelectorAll(this.settings.slides)),0===this.slides.length){var directChildren=this.slideshowSelector.children;this.slides=_toConsumableArray(directChildren).filter((function(child){return"BUTTON"!==child.tagName}))}if(this.total=this.slides.length,this.index=0,this.manualTimeout,this.originallyPaused=this.settings.paused,this.settings.randomize&&(this.index=Math.floor(Math.random()*this.total)),this.settings.progressive&&this.progressiveLoad(this.index,!0,this),this.firstIndex=this.index,this.slides.forEach((function(slide,index){index!==_this2.firstIndex&&(slide.setAttribute("aria-hidden","true"),slide.setAttribute("tab-index","-1")),slide.classList.contains("heart-slide")||slide.classList.add("heart-slide"),_this2.settings.swipe&&slide.setAttribute("draggable","true")})),this.goToSlide(this.firstIndex,!1,!0),this.slides.length<2)return!1;_this2.settings.progressive||setTimeout((function(){_this2.slideshowSelector.classList.add("progressive-loading-disabled"),_this2.kickstart()}),100);var initVis=function initVis(){return _this2.heartVisibilityHandler(_this2)},throttleClick,throttleClickResume;(_this2.settings.pauseOnInactiveWindow&&document.addEventListener("visibilitychange",initVis,!0),_this2.settings.swipe&&(_this2.slideshowSelector.addEventListener("touchstart",_this2.swipeHandler(_this2).handleTouchStart,!1),_this2.slideshowSelector.addEventListener("touchmove",_this2.swipeHandler(_this2).handleTouchMove,!1)),_this2.settings.clickToAdvance)&&_this2.slideshowSelector.addEventListener("click",(function(){throttleClick||(_this2.pause(),_this2.next(_this2,!0,!1,!0),throttleClick=setTimeout((function(){throttleClick=void 0}),_this2.settings.manualTransition),_this2.originallyPaused||(throttleClickResume&&clearTimeout(throttleClickResume),throttleClickResume=setTimeout((function(){_this2.resume()}),_this2.settings.transition+1.25*_this2.settings.delay)))}),!1);var slideshowButtons=_this2.slideshowSelector.querySelectorAll("button[class*='heart-']"),i,button;(_this2.settings.buttons||2===slideshowButtons.length)&&function(){function buttonHandler(button){throttleClick||(_this2.pause(),button.classList.contains("heart-next")?_this2.next(_this2,!0,!1,!0):button.classList.contains("heart-prev")&&_this2.previous(_this2,!0,!1,!0),throttleClick=setTimeout((function(){throttleClick=void 0}),200))}if(0===slideshowButtons.length){var buttonClasses=["heart-prev","heart-next"];for(i=0;i<buttonClasses.length;i++)(button=document.createElement("button")).classList.add(buttonClasses[i]),button.setAttribute("aria-label",buttonClasses[i].replace("heart-","")),button.setAttribute("tab-index","0"),button.addEventListener("click",(function(e){buttonHandler(e.currentTarget)}),!1),_this2.slideshowSelector.appendChild(button)}else{var _iterator=_createForOfIteratorHelper(slideshowButtons),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _button=_step.value;_button.setAttribute("tab-index","0");var ariaLabel=_button.classList.contains("heart-prev")?"prev":"next";_button.setAttribute("aria-label",ariaLabel),_button.addEventListener("click",(function(e){buttonHandler(e.currentTarget)}),!1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}()}return _createClass(HeartSlider,[{key:"kickstart",value:function kickstart(){var _this=this;if(_this.settings.progressive){_this.slideshowSelector.classList.add("first-image-loaded");var startProgressiveLoad=function startProgressiveLoad(){setTimeout((function(){_this.progressiveLoad((_this.firstIndex+1+_this.total)%_this.total)}),_this.settings.delay)};window.requestAnimationFrame(startProgressiveLoad)}_this.settings.paused||(_this.kickoffTimer=setTimeout((function(){_this.resume(),_this.kickoffTimer=void 0}),.5*_this.settings.delay+_this.settings.transition))}},{key:"on",value:function on(type,callback){var _this=this,supportedEvents=["transitionStart","transitionEnd"];if(supportedEvents.includes(type))if("function"==typeof callback){function callbackHandler(_this){var event=new CustomEvent(type,{detail:{slideshow:_this}});_this.slideshowSelector.dispatchEvent(event),callback(event.detail.slideshow,event.detail.slideshow.slideshowSelector,event.detail.slideshow.currentSlide)}"transitionStart"===type&&(this.transitionStart=function(_this){callbackHandler(_this)}),"transitionEnd"===type&&(this.transitionEnd=function(_this){callbackHandler(_this)})}else console.warn("Your second argument for "+type+" must be a function.");else console.warn('"'+type+'" is not a valid event. Try one of these:',supportedEvents)}},{key:"swipeHandler",value:function swipeHandler(_this){function getTouches(evt){return evt.touches||evt.originalEvent.touches}function handleTouchStart(evt){var firstTouch=getTouches(evt)[0];this.xDown=firstTouch.clientX,this.yDown=firstTouch.clientY}function handleTouchMove(evt){if(this.xDown&&this.yDown){var xUp=evt.touches[0].clientX,yUp=evt.touches[0].clientY,xDiff=this.xDown-xUp,yDiff=this.yDown-yUp;Math.abs(xDiff)>Math.abs(yDiff)&&(xDiff>0?(evt.preventDefault(),_this.pause(),_this.next(_this,!0,!1,!0)):(evt.preventDefault(),_this.pause(),_this.previous(_this,!0,!1,!0))),this.xDown=null,this.yDown=null}}return this.xDown=null,this.yDown=null,{getTouches:getTouches,handleTouchStart:handleTouchStart,handleTouchMove:handleTouchMove}}},{key:"heartVisibilityHandler",value:function heartVisibilityHandler(_this){null!==_this&&_this.settings.pauseOnInactiveWindow&&null!==document.querySelector(_this.settings.slideshow)&&("hidden"==document.visibilityState?(console.log("%cWindow Lost Focus. HeartSlider is Paused.","font-style: italic; font-size: 0.9em; color: #757575; padding: 0.2em;"),_this.pause()):(console.log("%cRegained Focus. Resumed HeartSlider.","font-style: italic; font-size: 0.9em; color: #6F9F67; padding: 0.2em;"),_this.resume()))}},{key:"goToSlide",value:function goToSlide(targetIndex){var isManuallyCalled=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isFirstSlide=arguments.length>2&&void 0!==arguments[2]&&arguments[2],skipDefaultTransition=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.transitioning&&!skipDefaultTransition)return!1;if(!this.settings.loop&&!isFirstSlide&&targetIndex===this.firstIndex)return this.pause(),!1;this.transitioning=!0;var _this=this;this.previousSlide=this.slides[this.index];var newTargetIndex=(targetIndex+this.total)%this.total;this.currentSlide=this.slides[newTargetIndex];var duration=isManuallyCalled||isFirstSlide||skipDefaultTransition?_this.settings.manualTransition:_this.settings.transition;function changeSlides(){var prevSlideProgress=1;if(_this.previousSlide===_this.currentSlide&&skipDefaultTransition){clearTimeout(_this.manualTimeout),clearInterval(_this.slideInterval);var prevSlideOpacity=window.getComputedStyle(_this.previousSlide).opacity;prevSlideProgress=1-prevSlideOpacity,_this.previousSlide.style.opacity=prevSlideOpacity,_this.previousSlide.style.transition="none",setTimeout((function(){_this.previousSlide.style.transition="opacity",_this.previousSlide.style.transitionDelay="0ms",_this.previousSlide.style.transitionDuration=duration*prevSlideProgress+"ms",_this.previousSlide.style.opacity=null}),16.6667)}else _this.previousSlide!==_this.currentSlide&&(_this.previousSlide.style.transitionDelay=duration+"ms",_this.previousSlide.style.transitionDuration="0ms",_this.previousSlide.classList.remove("active"));_this.currentSlide.style.transitionDelay="0ms",_this.currentSlide.style.transitionDuration=duration+"ms",_this.currentSlide.removeAttribute("aria-hidden"),_this.currentSlide.removeAttribute("tab-index"),_this.currentSlide.classList.add("active"),_this.transitionEndTimer&&clearTimeout(_this.transitionEndTimer),_this.transitionStart&&_this.transitionStart(_this),_this.transitionEndTimer=setTimeout((function(){_this.previousSlide.style.transitionDelay="0ms",_this.previousSlide.style.transitionDuration="0ms",isFirstSlide||(_this.previousSlide.setAttribute("aria-hidden","true"),_this.previousSlide.setAttribute("tab-index","-1"),_this.transitionEnd&&_this.transitionEnd(_this)),_this.transitioning=!1,_this.transitionEndTimer=void 0}),duration*prevSlideProgress)}this.index=newTargetIndex,this.progressiveLoad(newTargetIndex),this.progressiveLoad((newTargetIndex+1+_this.total)%_this.total),window.requestAnimationFrame(changeSlides)}},{key:"progressiveLoad",value:function progressiveLoad(target){var isFirstSlide=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_this=arguments.length>2?arguments[2]:void 0,currentImages=Array.prototype.slice.call(this.slides[target].querySelectorAll("img"));currentImages.length>0&&currentImages.forEach((function(currentImage,index){if(null!=currentImage&&!currentImage.classList.contains("image-loaded")&&!currentImage.classList.contains("image-loading")&&null!==currentImage.currentSrc){function loadHandler(){this.classList.add("image-loaded"),this.classList.remove("image-loading"),isFirstSlide&&0==index&&_this.kickstart()}var atts;if(currentImage.classList.add("image-loading"),currentImage.complete&&currentImage.naturalWidth>0)loadHandler.bind(currentImage)();else currentImage.onload=loadHandler.bind(currentImage),["sizes","srcset","src"].forEach((function(attribute){var targetAtt=currentImage.getAttribute("data-"+attribute);targetAtt&&null==currentImage.getAttribute(attribute)&&(currentImage.setAttribute(attribute,targetAtt),currentImage.setAttribute("data-"+attribute,""))}))}}))}},{key:"prevNextHandler",value:function prevNextHandler(targetIndex,indexToProgressiveLoad,isManuallyCalled){var _this=this;if(!0!==_this.transitioning)!0===isManuallyCalled&&_this.progressiveLoad(indexToProgressiveLoad),_this.goToSlide(targetIndex,isManuallyCalled,!1,!1),setTimeout((function(){_this.transitioning=!1}),isManuallyCalled?_this.settings.manualTransition:_this.settings.transition);else if(!0===isManuallyCalled){_this.manualTimeout&&clearTimeout(_this.manualTimeout),_this.originallyPaused||(_this.manualTimeout=setTimeout(_this.resume(),_this.settings.transition+_this.settings.delay)),_this.progressiveLoad(indexToProgressiveLoad);var skipDefaultTransition=!0;return void _this.goToSlide(_this.index,isManuallyCalled,!1,!1,!0)}}}]),HeartSlider}();